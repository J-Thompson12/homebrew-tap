# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Gitops < Formula
  desc "GitOps support for Kubernetes"
  homepage "https://docs.gitops.weave.works/docs/getting-started"
  version "0.3.8-rc7"

  on_macos do
    if Hardware::CPU.arm?
      url "https://github.com/J-Thompson12/weave-gitops/releases/download/v0.3.8-rc7/gitops-darwin-arm64"
      sha256 "f1afa3cb6c1fe00ea0d3071797102614c7e22365730bb1f2dcc219f4d1608889"

      def install
        bin.install "gitops"
        bash_output = Utils.safe_popen_read(bin/"gitops", "completion", "bash")
        (bash_completion/"gitops").write bash_output
        zsh_output = Utils.safe_popen_read(bin/"gitops", "completion", "zsh")
        (zsh_completion/"_gitops").write zsh_output
      end
    end
    if Hardware::CPU.intel?
      url "https://github.com/J-Thompson12/weave-gitops/releases/download/v0.3.8-rc7/gitops-darwin-x86_64"
      sha256 "a396659740f1a578905ca585887c5cf84d67ac382a887e3b4eba68a7f38f1331"

      def install
        bin.install "gitops"
        bash_output = Utils.safe_popen_read(bin/"gitops", "completion", "bash")
        (bash_completion/"gitops").write bash_output
        zsh_output = Utils.safe_popen_read(bin/"gitops", "completion", "zsh")
        (zsh_completion/"_gitops").write zsh_output
      end
    end
  end

  on_linux do
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/J-Thompson12/weave-gitops/releases/download/v0.3.8-rc7/gitops-linux-arm64"
      sha256 "147004c0e567d7e56093b74082d6bcbf016fdb47fa6d020ecf396f20fcf7b3ac"

      def install
        bin.install "gitops"
        bash_output = Utils.safe_popen_read(bin/"gitops", "completion", "bash")
        (bash_completion/"gitops").write bash_output
        zsh_output = Utils.safe_popen_read(bin/"gitops", "completion", "zsh")
        (zsh_completion/"_gitops").write zsh_output
      end
    end
    if Hardware::CPU.intel?
      url "https://github.com/J-Thompson12/weave-gitops/releases/download/v0.3.8-rc7/gitops-linux-x86_64"
      sha256 "aecf93e24373e59e6b8a88156f885e8d9b6b655f50a37828584be973d5da578c"

      def install
        bin.install "gitops"
        bash_output = Utils.safe_popen_read(bin/"gitops", "completion", "bash")
        (bash_completion/"gitops").write bash_output
        zsh_output = Utils.safe_popen_read(bin/"gitops", "completion", "zsh")
        (zsh_completion/"_gitops").write zsh_output
      end
    end
  end

  test do
    system "#{bin}/gitops version"
  end
end
